"0","n1_per_arm <- n1_seq[i]
  n2_per_arm <- (ntotal - n1_per_arm*(num_trt+1))/2
  n_per_arm <- n1_per_arm + n2_per_arm
  accrualTime_stage1 <- ceiling(n1_per_arm*(num_trt+1)/accrual_rate_stage1)
  accrualTime_stage2 <- ceiling(n2_per_arm*2/accrual_rate_stage2)
  (targetEventsFA_all <- round(n_per_arm*2*maturity))
"
"1","[1]"
"1"," 245"
"1","
"
"0","  (targetEventsIA_all <- round(targetEventsFA_all*IF))"
"1","[1]"
"1"," 122"
"1","
"
"0","  assHR_for_weights <- 0.67 # assumed HR for getting expected number of events from stage 1"
"0","  d <- getDesignGroupSequential("
"0","    kMax = 2,"
"0","    alpha = alpha,"
"0","    sided = 1,"
"0","    informationRates = c(targetEventsIA_all/targetEventsFA_all, 1),"
"0","    typeOfDesign = ""asOF"""
"0","  )"
"0","  d_power <- getPowerSurvival("
"0","    design = d,"
"0","    hazardRatio = assHR_for_weights, lambda2 = log(2) / medianOS_c,"
"0","    dropoutRate1 = 0, dropoutRate2 = 0, dropoutTime = 24,"
"0","    accrualTime = c(0, accrualTime_stage1, accrualTime_stage1 + enrollment_hold,"
"0","                    accrualTime_stage1+ enrollment_hold + accrualTime_stage2), "
"0","    accrualIntensity = c(n1_per_arm*2/accrualTime_stage1, 0, n2_per_arm*2/accrualTime_stage2), "
"0","    maxNumberOfEvents = targetEventsFA_all,"
"0","    directionUpper = FALSE"
"0","  )"
"0","  times <- d_power$analysisTime"
"0","  maxN <- n1_per_arm*2"
"0","  probEvent <- getEventProbabilities(time = times, "
"0","                                     hazardRatio = assHR_for_weights, lambda2 = log(2) / medianOS_c,"
"0","                                     dropoutRate1 = 0, dropoutRate2 = 0, dropoutTime = 24,"
"0","                                     accrualTime = 0, accrualIntensity = n1_per_arm*2/accrualTime_stage1,"
"0","                                     maxNumberOfSubjects = maxN)"
"0","  (targetEvents1 <- round(probEvent$overallEventProbabilities*maxN))"
"1","[1]"
"1"," 116"
"1"," 162"
"1","
"
"0","  targetEventsIA_stage1 <- targetEvents1[1]"
"0","  targetEventsFA_stage1 <- targetEvents1[2]"
"0","  wei_IA <- sqrt(targetEventsIA_stage1/targetEventsIA_all)"
"0","  wei_FA <- sqrt(targetEventsFA_stage1/targetEventsFA_all)"
"0","  bound_z_IA <- d$criticalValues[1]"
"0","  bound_z_FA <- d$criticalValues[2]"
"0","  rho <- 0.7"
"0","  hr_trt <- c(0.85, 0.75, 0.67) "
"0","  orr_trt <- c(0.25, 0.30, 0.40)"
"0","  hazards <- c(log(2)/medianOS_c, log(2)/medianOS_c*hr_trt)"
"0","  orrs <- c(0.2, orr_trt)"
"0","  test.method <- ""dunnett"""
